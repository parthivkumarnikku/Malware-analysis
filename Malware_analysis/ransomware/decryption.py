import os
from cryptography.fernet import Fernet
files_here = []
for file in os.listdir():
	if file == ".key.key":
		flag = 1
		continue
	if file == "encryption.py" or file == "decryption.py":
		continue
	files_here.append(file)
print(f"here are the files {files_here}")

if flag == 1:
	#reading the key file
	with open(".key.key" ,"rb") as keyptr:
		key = keyptr.read()
else:
	print("key file not found")

#creating a fernet obj
Fernet_obj = Fernet(key) 




for cur_file in files_here:

	with open(cur_file ,"rb") as fileptr:
		data = fileptr.read()
	decrypted_data = Fernet_obj.decrypt(data)

	with open(cur_file ,"wb") as fileptr:
		fileptr.write(decrypted_data)



#checking the contents of the files.
for cur_file in files_here:
	print(f"Contents of the File with the name {cur_file} :")
	os.system(f"cat {cur_file}")
	print("\n\n--------------------------------------------------")
	print("\n")
	print("\n")

